artifactory:
  build: ./artifactory
  ports:
    - "18081:8080"
  volumes:
    - ./data_volume/artifactory/data:/artifactory/data:rw
    - ./data_volume/artifactory/logs:/artifactory/logs:rw
    - ./data_volume/artifactory/backup:/artifactory/backup:rw
    
db:
  image: postgres
  net: container:sonar
  environment:
   - POSTGRES_USER=sonar
   - POSTGRES_PASSWORD=sonar

sonar:
  build: ./sonar
  ports:
   - "19000:9000"
   - "5432:5432"
  environment:
   - SONARQUBE_JDBC_URL=jdbc:postgresql://192.168.99.100:5432/sonar
   - SONARQUBE_JDBC_USERNAME=sonar
   - SONARQUBE_JDBC_PASSWORD=sonar
  volumes:
    - ./data_volume/sonarqube/data:/opt/sonarqube/data:rw
    - ./data_volume/sonarqube/logs:/opt/sonarqube/logs:rw
    - ./data_volume/sonarqube/extensions:/opt/sonarqube/extensions:rw
